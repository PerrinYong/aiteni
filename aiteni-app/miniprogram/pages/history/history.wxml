<!--pages/history/history.wxml-->
<view class="container">
  <!-- è‡ªå®šä¹‰å¯¼èˆªæ  -->
  <view class="custom-navbar" style="padding-top: {{statusBarHeight}}px;">
    <view class="navbar-content">
      <view class="brand-mark">
        <view class="brand-mark__i"></view>
        <view class="brand-mark__ball"></view>
        <view class="brand-mark__court"></view>
      </view>
      <text class="navbar-title">è¯„æµ‹è®°å½•</text>
    </view>
  </view>

  <!-- å†…å®¹åŒº -->
  <view class="page-content" style="padding-top: {{navbarHeight + statusBarHeight}}px;">
    <!-- ç©ºçŠ¶æ€ -->
    <view wx:if="{{history.length === 0}}" class="empty-state">
      <text class="empty-icon">ğŸ“</text>
      <text class="empty-text">è¿˜æ²¡æœ‰è¯„æµ‹è®°å½•</text>
      <button class="btn-primary" style="width: 400rpx; margin-top: 40rpx;" bindtap="startTest">
        å¼€å§‹è¯„æµ‹
      </button>
    </view>

    <!-- å†å²è®°å½•åˆ—è¡¨ -->
    <view wx:else class="history-list">
      <view
        wx:for="{{history}}"
        wx:key="id"
        class="history-card card card-soft"
        bindtap="viewResult"
        data-result-id="{{item.id}}"
      >
        <view class="history-header">
          <view class="history-level">
            <text class="level-badge">{{item.overallLevel}}</text>
            <text class="level-label">{{item.levelLabel}}</text>
          </view>
          <text class="history-date">{{item.dateText}}</text>
        </view>

        <view class="history-tags">
          <text
            wx:for="{{item.topDimensions}}"
            wx:key="*this"
            wx:for-item="tag"
            class="chip chip-blue"
          >{{tag}}</text>
        </view>

        <view class="history-footer">
          <text class="view-detail">æŸ¥çœ‹è¯¦æƒ… â†’</text>
        </view>
      </view>
    </view>
  </view>
</view>
